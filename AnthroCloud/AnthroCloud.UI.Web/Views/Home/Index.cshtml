@{
    ViewData["Title"] = "Home Page";
}

@model FormViewModel
@*@namespace FormModel*@
@* https://getbootstrap.com/docs/4.0/components/forms/#form-groups *@
@* https://getbootstrap.com/docs/4.0/layout/grid/ *@

@functions{
    public string getColor(double zscore)
    {
        var colorCode = zscore switch
        {
            double n when (n <= 1 && n >= -1) => "#eafaf1", //GREEN
            double n when (n <= -1 && n >= -2) || (n <= 2 && n > 1) => "#fef9e7", //GOLD
            double n when (n < -2 && n >= -3) || (n <= 3 && n > 2) => "#fdedec", //RED
            double n when (n > 3 || n < -3) => "#aab3bb", //BLACK  ebedef aab3bb
            _ => string.Empty,
        };
        return colorCode;
    }
}
<script>
    // Popup window function
    function basicPopup(url) {
        popupWindow = window.open(url, 'popUpWindow', 'height=575,width=575,left=100,top=100,resizable=no,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no, status=yes');
    }
</script>
<!-- Added 11/5 11:14AM -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script>
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawVisualization);

    function drawVisualization(year, value1, value2) {
        var data = google.visualization.arrayToDataTable([
            ['Year', 'Sales', 'Expenses'], [year, value1, value2],]);
        var options = {
            title: 'Company Performance', hAxis: { title: 'Year', titleTextStyle: { color: 'red' } }
        };

        new google.visualization.ColumnChart(document.getElementById('mylinechart_div')).draw(data, options);
    }

    //google.charts.setOnLoadCallback(LoadData);

    //function LoadData() {
    //    $.ajax({

    //        url: 'LineChart/PopulationChart',
    //        dataType: "json",
    //        type: "GET",
    //        error: function (xhr, status, error) {
    //            var err = eval("(" + xhr.responseText + ")");
    //            toastr.error(err.message);
    //        },
    //        success: function (data) {
    //            PopulationChart(data);
    //            return false;
    //        }
    //    });
    //    return false;
    //}

    //function PopulationChart(data) {
    //    var dataArray = [
    //        ['lengthincm', 'p3', 'p15', 'p50', 'p85', 'p97']
    //    ];

    //    $.each(data, function (i, item) {
    //        dataArray.push([item.lengthincm, item.p3, item.p15, item.p50, item.p85, item.p97]);
    //    });

    //    var data = google.visualization.arrayToDataTable(dataArray);
    //    var options = {
    //        'title': 'Length-for-age BOYS',
    //        hAxis: {
    //            title: 'Age (months)'
    //        },
    //        vAxis: {
    //            title: 'Length\height (cm)'
    //        },
    //        'width': 550,
    //        'height': 400,
    //        curveType: 'function',
    //        legend: 'right',
    //        pointSize: 0,
    //        series: {
    //            0: { pointSize: 15, pointShape: { type: 'circle', sides: 5, dent: 0.8 } },
    //            1: { color: '#000000' },
    //            2: { color: '#e10808' },
    //            3: { color: '#0c8d00' },
    //            4: { color: '#e10808' },
    //            5: { color: '#000000' }
    //        }
    //    };
    //    var chart = new google.visualization.LineChart(document.getElementById('mylinechart_div'));

    //    chart.draw(data, options);
    //    return false;
    //}

</script>

<form asp-action="Index" asp-controller="Home" method="post">
    <div class="form-row">
        <div class="col-md-6 mb-2">
            <label asp-for="DateOfBirth">Date of Birth</label>
            <input asp-for="DateOfBirth" type="date" class="form-control" placeholder="Enter patient's Date of Birth." required>
        </div>
        <div class="col-md-6 mb-2">
            <label>Date of Visit</label>
            <input asp-for="DateOfVisit" type="date" class="form-control" placeholder="Enter patient's Date of Visit." required />
            @*<input type="date" value="@Model.DateOfVisit" name="DateOfVisit" class="form-control" placeholder="Enter patient's Date of Visit" required>
                @Html.TextBoxFor(Model => Model.DateOfVisit, new { @type = "date", @class = "form-control datepicker", @Value = "10/16/2019" })
                @Html.TextBoxFor(Model => Model.DateOfVisit, "{0:yyyy-MM-dd}", new { @class = "form-control", @type = "date" })*@
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4 mb-2">
            <label asp-for="Sex" class="col-form-label">Sex</label>
            <div class="form-group">
                <label class="d-block">
                    <input asp-for="Sex" type="radio" value="1" class="ml-2 mr-2"> Male
                </label>
                <label class="d-block">
                    <input asp-for="Sex" type="radio" value="2" class="ml-2 mr-2"> Female
                </label>
            </div>
        </div>
        <div class="col-md-4 mb-2">
            <label class="col-form-label">Standing</label>
            <div class="form-group">
                <label class="d-block">
                    <input type="radio" class="ml-2 mr-2" name="measurement" @{ if (Model.AgeInYears < 2) { @Html.Raw("checked")  } } disabled readonly> Recumbent
                </label>
                <label class="d-block">
                    <input type="radio" class="ml-2 mr-2" name="measurement" @{ if (Model.AgeInYears >= 2) { @Html.Raw("checked")  } } disabled readonly> Standing
                </label>
            </div>
        </div>
        <div class="col-md-4 mb-2">
            <label asp-for="Oedema" class="col-form-label">Oedema</label>
            <div class="form-group">
                <label class="d-block">
                    <input asp-for="Oedema" type="radio" class="ml-2 mr-2" value="True" readonly> Yes
                </label>
                <label class="d-block">
                    <input asp-for="Oedema" type="radio" class="ml-2 mr-2" value="False" readonly> No
                </label>
            </div>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <div class="form-group row">
                <label for="validationDefault01" class="col-sm-5 col-form-label">Weight (kg)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="Weight" class="form-control" type="number" MIN=".9" MAX="58" STEP=".1" SIZE="6" id="validationDefault01" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="validationDefault02" class="col-sm-5 col-form-label">Head Circumference (cm)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="HeadCircumference" class="form-control" type="number" MIN="25.0" MAX="64.0" STEP=".1" SIZE="6" id="validationDefault02" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="validationDefault03" class="col-sm-5 col-form-label">MUAC (cm)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="MUAC" class="form-control" type="number" MIN="6.0" MAX="35.0" STEP=".1" SIZE="6" id="validationDefault03" required>
                </div>
            </div>
        </div>
        <div class="form-group col-md-6">
            <div class="form-group row">
                <label for="validationDefault04" class="col-sm-5 col-form-label">Length/Height(CM)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="LengthHeight" class="form-control" type="number" MIN="38.0" MAX="150.0" STEP=".1" SIZE="6" id="validationDefault04" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="validationDefault05" class="col-sm-5 col-form-label">Triceps skinfold (mm)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="TricepsSkinFold" class="form-control" type="number" MIN="1.8" MAX="40.0" STEP=".1" SIZE="6" id="validationDefault05" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="validationDefault06" class="col-sm-5 col-form-label">Subscapular skinfold (mm)</label>
                <div class="col-sm-7">
                    <INPUT asp-for="SubscapularSkinFold" class="form-control" type="number" MIN="1.8" MAX="40.0" STEP=".1" SIZE="6" id="validationDefault06" required>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12 text-center">
        <button class="btn btn-primary" type="submit">Calculate</button>
        @*<a asp-controller="LineChart" asp-action="Index" onclick="basicPopup(this.href);return false">Line Chart</a>
        <a asp-controller="LineChart" asp-action="WFL_P" onclick="basicPopup(this.href);return false">P Chart</a>
        <a asp-controller="LineChart" asp-action="WFL_Z" onclick="basicPopup(this.href);return false">Z Chart</a>
        <a asp-controller="LineChart" asp-action="BFA_P" onclick="basicPopup(this.href);return false">BFA P Chart</a>*@
    </div>
</form>
<div class="form-row">
    <div class="col-md-6 mb-2">
        <label>Age:</label>
        <input asp-for="Age" class="form-control" type="text" placeholder="..." readonly />
    </div>
    <div class="col-md-6 mb-2">
        <label>BMI:</label>
        <input asp-for="BMI" class="form-control" type="text" placeholder="..." readonly />
    </div>
</div>
<datalist id="tickmarks">
    <option value="0" label="0%"></option>
    <option value="25">25</option>
    <option value="50" title="50%" label="50%"></option>
    <option value="75">75</option>
    <option value="100" label="100%"></option>
</datalist>
<!-- Weight For Length -->
<div class="form-row">
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">Weight-for-Length</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="WflPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="WflPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="WflZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.WflZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="WflPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="WflZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.WflZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="WFL_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="WFL_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            @*<button class="btn btn-outline-secondary col-md-1 mr-1"><i class="fa fa-line-chart"></i></button>
            <button class="btn btn-outline-secondary col-md-1 mr-1"><i class="fa fa-line-chart"></i></button>*@
        </div>
    </div>
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="col-md-3 mt-1 mr-1">HC-for-age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="WflPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="HcaPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="HcaZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.HcaZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="HcaPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="HcaZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.HcaZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="HCA_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="HCA_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <!-- Weight For Age -->
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">Weight-for-Age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="WfaPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="WfaPercentile" class="form-control" value="NA" readonly>
                <input type="text" asp-for="WfaZscore" class="form-control" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.WfaZscore)} }" readonly>
            }
            else
            {
                <input class="form-control col-md-2 mr-1" type="text" asp-for="WfaPercentile" readonly>
                <input class="form-control col-md-2 mr-1" type="text" asp-for="WfaZscore" style="background-color: @{ if (Model != null) {@getColor(Model.WfaZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="WFA_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="WFA_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">MUAC-for-age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="MuacPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="MuacPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="MuacZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.MuacZscore)} }" readonly>
            }
            else
            {
                <input class="form-control col-md-2 mr-1" type="text" asp-for="MuacPercentile" readonly>
                <input class="form-control col-md-2 mr-1" type="text" asp-for="MuacZscore" style="background-color: @{ if (Model != null) {@getColor(Model.MuacZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="MUAC_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="MUAC_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <!-- Length For Age -->
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">Length-for-Age</label>
            <input class="form-control-range  col-md-2 mr-1" asp-for="LfaPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="LfaPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="LfaZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.LfaZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="LfaPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="LfaZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.LfaZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="LHFA_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="LHFA_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">TSF-for-age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="TsfPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="TsfPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="TsfZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.TsfZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="TsfPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="TsfZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.TsfZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="TSF_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="TSF_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <!-- BMI For Age -->
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">BMI-for-Age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="BfaPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="BfaPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="BfaZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.BfaZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="BfaPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="BfaZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.BfaZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="BFA_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="BFA_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
        </div>
    </div>
    <div class="form-group col-md-6">
        <div class="form-group row">
            <label class="text-nowrap col-md-3 mt-1 mr-1">SSF-for-age</label>
            <input class="form-control-range col-md-2 mr-1" asp-for="SsfPercentile" type="range" min="0" max="100" step=".1" list="tickmarks" disabled />
            @if (Model != null && Model.Oedema == true)
            {
                <input type="text" asp-for="SsfPercentile" class="form-control col-md-2 mr-1" value="NA" readonly>
                <input type="text" asp-for="SsfZscore" class="form-control col-md-2 mr-1" value="NA" style="background-color: @{ if (Model != null) {@getColor(Model.SsfZscore)} }" readonly>
            }
            else
            {
                <input type="text" asp-for="SsfPercentile" class="form-control col-md-2 mr-1" readonly>
                <input type="text" asp-for="SsfZscore" class="form-control col-md-2 mr-1" style="background-color: @{ if (Model != null) {@getColor(Model.SsfZscore)} }" readonly>
            }
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="SSF_P" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            <a class="btn btn-outline-secondary col-md-1 mr-1" asp-controller="LineChart" asp-action="SSF_Z" onclick="basicPopup(this.href);return false">
                <i class="fa fa-line-chart"></i>
            </a>
            @*
            <button class="btn btn-outline-secondary col-md-1 mr-1" onclick="drawVisualization('2004',50,35)" data-toggle="modal" data-target="#myModal"><i class="fa fa-line-chart"></i></button>
            <button class="btn btn-outline-secondary col-md-1 mr-1" onclick="LoadData()" data-toggle="modal" data-target="#myModal"><i class="fa fa-line-chart"></i></button>
            *@
        </div>
    </div>
</div>

@*<a href="https://www.quackit.com/javascript/examples/sample_popup.cfm" onclick="basicPopup(this.href);return false">Open a popup window</a>
<a asp-controller="LineChart" asp-action="Index" onclick="basicPopup(this.href + '/1/');return false">Line Chart</a>*@
@*<a href="Views/LineChart/Chart.html" onclick="basicPopup(this.href);return false">NEW Chart 1</a>
<a href="/LineChart/Chart.html" onclick="basicPopup(this.href);return false">NEW Chart 2</a>
<a href="/Views/LineChart/Chart.html" onclick="basicPopup(this.href);return false">NEW Chart 3</a>
<a href="~Views/LineChart/Chart.html" onclick="basicPopup(this.href);return false">NEW Chart 4</a>*@

<!-- <a class="btn btn-info" asp-area="" asp-controller="LineChart" asp-action="Index" data-toggle="modal" data-target="#myModal" onclick="drawVisualization('2004',50,35)">Click me !</a>-->
<!--  style="width: 900px; height: 500px;" -->
<!-- Modal -->

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog ">

        <div class="modal-content" style="width: 575px; ">

            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel">Modal title</h5>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="mylinechart_div"></div>@*style="width: 650px; height: 180px;"*@
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
